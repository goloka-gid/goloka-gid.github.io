<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ú–∏—Ä –≠–ª–ª–∏</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&family=Lora:ital,wght@0,400;1,500&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

    <div id="view-grid" class="view-section active-view">
        <h1>‚ú® –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≠–ª–ª–∏</h1>
        <div class="grid" id="main-grid"></div>
        <div class="reset-link" onclick="confirmReset()">—Å–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</div>
    </div>

    <div id="view-menu" class="view-section">
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 0 10px;">
            <button class="simple-back" onclick="goHome()">‚¨Ö –ö –∫–∞—Ä—Ç–µ –¥–Ω–µ–π</button>
            <button class="simple-back" onclick="openInstructions()" style="font-size: 20px; padding: 5px; background: none; border: none; cursor: pointer;">‚ùì</button>
        </div>
        <h2 id="menu-title" style="margin-top: 0;"></h2>
        
        <div class="menu-container">
            <div class="menu-btn" onclick="openContent('story')">
                <span class="menu-icon">üìñ</span>
                <div>
                    <div style="font-weight:bold">–°–∫–∞–∑–æ—á–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è</div>
                    <div style="font-size:11px; opacity:0.7">–ß–∏—Ç–∞—Ç—å –∏ —Å–ª—É—à–∞—Ç—å</div>
                </div>
            </div>

            <div class="menu-btn" onclick="openContent('video')">
                <span class="menu-icon">üé¨</span>
                <div>
                    <div style="font-weight:bold">–°–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ</div>
                    <div style="font-size:11px; opacity:0.7">–í–æ–ª—à–µ–±–Ω—ã–π –º—É–ª—å—Ç—Ñ–∏–ª—å–º</div>
                </div>
            </div>

            <div class="menu-btn" onclick="openContent('song')">
                <span class="menu-icon">üéµ</span>
                <div>
                    <div style="font-weight:bold">–ü–µ—Å–µ–Ω–∫–∞ –¥–Ω—è</div>
                    <div style="font-size:11px; opacity:0.7">–¢–∞–Ω—Ü—É–π –∏ –ø–æ–π</div>
                </div>
            </div>
            
            <div class="menu-btn" onclick="openContent('child')">
                <span class="menu-icon">üë∂</span>
                <div>
                    <div style="font-weight:bold">–ü—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è –¥–µ—Ç–µ–π</div>
                    <div style="font-size:11px; opacity:0.7">–¥–æ 15 –ª–µ—Ç</div>
                </div>
            </div>

            <div class="menu-btn" onclick="openContent('adult')">
                <span class="menu-icon">üßò‚Äç‚ôÄÔ∏è</span>
                <div>
                    <div style="font-weight:bold">–í–∑—Ä–æ—Å–ª–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞</div>
                    <div style="font-size:11px; opacity:0.7">–û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å –¥–ª—è —Ç–µ–±—è</div>
                </div>
            </div>
        </div>
    </div>

    <div id="view-content" class="view-section">
        <div class="header-fixed">
            <button class="nav-btn" onclick="goHome()">üè† –î–Ω–∏</button>
            <span id="header-title" style="font-size:12px; font-weight:bold; max-width: 120px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"></span>
            <button class="nav-btn" onclick="goBackToMenu()">üîô –ú–µ–Ω—é</button>
        </div>

        <div class="scroll-wrapper" id="scroll-box">
            <div style="padding: 15px;">
                
                <div id="video-area" style="display:none;">
                    <div class="section-box" style="text-align: center;">
                        <h3 style="color: var(--accent); margin:0 0 10px 0;">üé¨ –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞!</h3>
                        <div class="video-wrapper">
                            <video id="video-player" controls playsinline></video>
                        </div>
                    </div>
                </div>

                <img id="main-image" src="" class="book-media" style="display:none;" onerror="this.style.display='none'">

                <div class="section-box" id="text-box" style="display:none;">
                    <div id="text-display" class="magic-text"></div>
                </div>

                <div class="section-box" id="audio-box" style="display:none;">
                    <h3 id="audio-title" style="color: var(--accent); margin-top:0; font-size: 16px;">üéß –°–ª—É—à–∞—Ç—å</h3>
                    <audio id="audio-player" controls></audio>
                </div>

            </div>
        </div>
        
        <button class="fab-scroll" id="scroll-btn" onclick="toggleAutoScroll()">‚ú®</button>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –û–ü–õ–ê–¢–ê (Offer) -->
    <div id="access-denied-modal" class="modal-overlay">
        <div class="modal-box offer-box">
            <h3 style="color:var(--accent); margin-top:0;">–î–æ—Å—Ç—É–ø –∑–∞–∫—Ä—ã—Ç üîí</h3>
            
            <div class="offer-price-row">
                –°—Ç–æ–∏–º–æ—Å—Ç—å –∫—É—Ä—Å–∞ (30 –¥–Ω–µ–π):<br>
                <span class="offer-price-val">50 000 —Ä—É–±.</span>
            </div>
            <div class="offer-price-row">
                –°—Ç–æ–∏–º–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –¥–Ω—è:<br>
                <span id="day-price-container">
                    <span class="price-strike">2 000 —Ä—É–±.</span> <span class="price-new">1 000 —Ä—É–±.</span>
                </span>
            </div>

            <div class="discount-block" id="discount-block">
                <div class="discount-title">üî• –°–∫–∏–¥–∫–∞ 50% –¥–µ–π—Å—Ç–≤—É–µ—Ç:</div>
                <div class="discount-timer" id="offer-timer">30:00</div>
                <div style="font-size:10px; color:#FF4500; margin-top:2px;">–¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∏ —Ä–µ—à–∏—Ç–µ–ª—å–Ω—ã—Ö</div>
            </div>

            <button class="access-btn" onclick="openPaymentLink()">–û–ø–ª–∞—Ç–∏—Ç—å –¥–æ—Å—Ç—É–ø</button>
            <br>
            <button class="green-btn" onclick="showPaymentWarning()">–Ø —É–∂–µ –æ–ø–ª–∞—Ç–∏–ª</button>
            <br><br>
            <button class="modal-btn secondary" onclick="closeAccessModal()">–ü–æ–¥—É–º–∞—Ç—å –µ—â–µ</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –î–ï–ù–¨ 3 (–û–¢–ó–´–í) -->
    <div id="review-modal" class="modal-overlay">
        <div class="modal-box offer-box">
            <h3 style="color:var(--accent); margin-top:0;">–î–µ–Ω—å 3 –∑–∞ –æ—Ç–∑—ã–≤ üéÅ</h3>
            
            <p style="font-size:14px; line-height:1.4;">
                –ù–∞–¥–µ–µ–º—Å—è, –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–∏—Å—å –ø–µ—Ä–≤—ã–µ –¥–≤–∞ –¥–Ω—è! 
                <br><br>
                –ß—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å —ç—Ç–æ—Ç –¥–µ–Ω—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–∏ –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è –æ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —É—Ä–æ–∫–∞—Ö.
            </p>

            <button class="access-btn" style="background: linear-gradient(45deg, #00BFFF, #1E90FF);" onclick="openReviewLink()">‚úçÔ∏è –ù–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∑—ã–≤</button>
            
            <div style="margin: 15px 0 10px 0; font-size: 12px; color: #999;">‚Äî –∏–ª–∏ ‚Äî</div>

            <button class="access-btn" onclick="openPaymentLink()">–û–ø–ª–∞—Ç–∏—Ç—å —ç—Ç–æ—Ç –¥–µ–Ω—å</button>
            <br><br>
            <button class="modal-btn secondary" onclick="closeReviewModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï –û–ë –û–ü–õ–ê–¢–ï -->
    <div id="payment-warning-modal" class="modal-overlay">
        <div class="modal-box">
            <h3 style="color:#d9534f; margin-top:0;">‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ!</h3>
            <p style="font-size:13px; line-height:1.4;">
                –ï—Å–ª–∏ –≤—ã —Ç–æ—á–Ω–æ –æ–ø–ª–∞—Ç–∏–ª–∏ –¥–æ—Å—Ç—É–ø, —Ç–æ –≤ —Ç–µ—á–µ–Ω–∏–µ —Å—É—Ç–æ–∫ –≤–∞–º –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø.
                <br><br>
                <b>–ï—Å–ª–∏ –≤—ã –Ω–µ –æ–ø–ª–∞—á–∏–≤–∞–ª–∏, —Ç–æ –∑–∞–∫—Ä–æ–π—Ç–µ —ç—Ç–æ –æ–∫–Ω–æ, –∏–Ω–∞—á–µ –≤—ã –±—É–¥–µ—Ç–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∏ –ø–æ—Ç–µ—Ä—è–µ—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω–∞–≤—Å–µ–≥–¥–∞.</b>
            </p>
            <button class="green-btn" style="font-size:14px; padding:12px;" onclick="confirmPaymentClaim()">–Ø –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ–ø–ª–∞—Ç–∏–ª</button>
            <br><br>
            <button class="modal-btn secondary" onclick="closePaymentWarning()">–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –ë–õ–û–ö–ò–†–û–í–ö–ê -->
    <div id="blocked-modal" class="modal-overlay" style="z-index:9999;">
        <div class="modal-box" style="border-color:red;">
            <h3 style="color:red; margin-top:0;">üö´ –î–û–°–¢–£–ü –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù</h3>
            <p>–í–∞—à –∞–∫–∫–∞—É–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —á–µ—Ä–Ω–æ–º —Å–ø–∏—Å–∫–µ.</p>
            <p style="font-size:12px;">–ï—Å–ª–∏ —ç—Ç–æ –æ—à–∏–±–∫–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.</p>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–ø–µ—Ä–µ—Å–∫–æ–∫) -->
    <div id="warning-modal" class="modal-overlay">
        <div class="modal-box">
            <h3 style="color:var(--accent); margin-top:0;">–ù–µ —Å–ø–µ—à–∏—Ç–µ!</h3>
            <p>–ù–µ–ª—å–∑—è –ø–µ—Ä–µ—Å–∫–æ—á–∏—Ç—å, –Ω–µ –ø—Ä–æ–π–¥—è –ø—Ä–µ–¥—ã–¥—É—â–∏–π –¥–µ–Ω—å.</p>
            <div style="display:flex; flex-direction: column; gap: 10px; margin-top: 15px;">
                <button class="modal-btn" id="warn-btn-back" onclick="closeWarningModal()">–í–µ—Ä–Ω—É—Ç—å—Å—è</button>
                <button class="modal-btn secondary" id="warn-btn-unlock" onclick="handleLockedNextDay()">–û—Ç–∫—Ä—ã—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å</button>
            </div>
        </div>
    </div>

    <!-- –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –°–ö–†–ò–ü–¢–û–í (–ü–û–†–Ø–î–û–ö –í–ê–ñ–ï–ù!) -->
    <script src="config.js"></script>
    <script src="data.js"></script>
    <script src="app.js"></script>

</body>
</html>
