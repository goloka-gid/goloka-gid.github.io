<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∏—Ä –≠–ª–ª–∏</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* (–°—Ç–∏–ª–∏ –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ –∂–µ, —á—Ç–æ –∏ –≤ –ø—Ä–æ—à–ª–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã) */
        :root { --bg-gradient: linear-gradient(135deg, #fdfbf7 0%, #e8e3f5 100%); --accent: #9b87f5; --card-bg: rgba(255, 255, 255, 0.85); --text: #4a4a6a; --shadow: rgba(155, 135, 245, 0.2); }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg-gradient); background-attachment: fixed; color: var(--text); margin: 0; padding: 20px; min-height: 100vh; -webkit-tap-highlight-color: transparent; }
        .header { text-align: center; margin-bottom: 25px; }
        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; max-width: 500px; margin: 0 auto; }
        .day-card { background: var(--card-bg); backdrop-filter: blur(8px); border-radius: 20px; padding: 15px 5px; text-align: center; box-shadow: 0 6px 15px var(--shadow); transition: 0.3s; border: 1px solid rgba(255, 255, 255, 0.6); display: flex; flex-direction: column; align-items: center; }
        .day-card:active { transform: scale(0.92); }
        .day-num { font-size: 10px; color: #999; }
        .day-icon { font-size: 24px; margin: 5px 0; }
        .artifact-label { font-size: 11px; font-weight: 600; line-height: 1.2; }
        #content-page { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-gradient); overflow-y: auto; z-index: 1000; padding: 20px; box-sizing: border-box; }
        .section-box { background: white; border-radius: 20px; padding: 15px; margin-bottom: 15px; }
        .section-title { font-weight: bold; color: var(--accent); margin-bottom: 10px; display: block; border-left: 4px solid var(--accent); padding-left: 10px; }
        .tab-menu { display: flex; gap: 8px; margin-bottom: 10px; }
        .tab-btn { flex: 1; padding: 8px; border: 1px solid var(--accent); background: none; border-radius: 10px; color: var(--accent); font-size: 13px; }
        .tab-btn.active { background: var(--accent); color: white; }
        .text-content { display: none; font-size: 14px; line-height: 1.6; white-space: pre-wrap; background: #fafafa; padding: 10px; border-radius: 10px; }
        audio { width: 100%; margin-top: 5px; }
        .back-btn { background: none; border: none; color: var(--accent); font-weight: bold; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div class="header">
        <h1>‚ú® –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≠–ª–ª–∏</h1>
        <p>30 –¥–Ω–µ–π —á—É–¥–µ—Å –∏ –æ—Ç–∫—Ä—ã—Ç–∏–π</p>
    </div>

    <div class="grid" id="main-grid"></div>

    <div id="content-page">
        <button class="back-btn" onclick="closeDay()">‚Üê –ù–∞–∑–∞–¥</button>
        <h2 id="artifact-name-label" style="text-align: center; color: var(--accent);"></h2>

        <div class="section-box">
            <span class="section-title">üìñ –ò—Å—Ç–æ—Ä–∏—è –≠–ª–ª–∏</span>
            <div class="tab-menu"><button class="tab-btn active" onclick="setMode(this, 's-a', 's-t')">–°–ª—É—à–∞—Ç—å</button><button class="tab-btn" onclick="setMode(this, 's-t', 's-a')">–ß–∏—Ç–∞—Ç—å</button></div>
            <audio id="s-a" controls></audio><div id="s-t" class="text-content">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>

        <div class="section-box">
            <span class="section-title">üéµ –ü–µ—Å–µ–Ω–∫–∞</span>
            <audio id="song-audio" controls></audio>
        </div>

        <div class="section-box">
            <span class="section-title">üß∏ –î–ª—è –¥–µ—Ç–µ–π</span>
            <div class="tab-menu"><button class="tab-btn active" onclick="setMode(this, 'c-a', 'c-t')">–ê—É–¥–∏–æ</button><button class="tab-btn" onclick="setMode(this, 'c-t', 'c-a')">–¢–µ–∫—Å—Ç</button></div>
            <audio id="c-a" controls></audio><div id="c-t" class="text-content">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>

        <div class="section-box">
            <span class="section-title">üßò –î–ª—è –≤–∑—Ä–æ—Å–ª—ã—Ö</span>
            <div class="tab-menu"><button class="tab-btn active" onclick="setMode(this, 'a-a', 'a-t')">–ê—É–¥–∏–æ</button><button class="tab-btn" onclick="setMode(this, 'a-t', 'a-a')">–¢–µ–∫—Å—Ç</button></div>
            <audio id="a-a" controls></audio><div id="a-t" class="text-content">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <script>
        // –°–ø–∏—Å–æ–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –∏ –∏—Ö –∏–∫–æ–Ω–æ–∫
        const items = [
            {n: "–í–æ–ª—à–µ–±–Ω–∞—è –ö–∏—Å—Ç—å", i: "üñåÔ∏è"}, {n: "–ó–µ—Ä–∫–∞–ª–æ –ú–µ—á—Ç—ã", i: "ü™û"}, {n: "–ö–æ–º–ø–∞—Å –ù–∞–º–µ—Ä–µ–Ω–∏–π", i: "üß≠"},
            {n: "–°—É–Ω–¥—É–∫ –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–µ–π", i: "üì¶"}, {n: "–ê–º—É–ª–µ—Ç –°–∏–ª—ã", i: "üßø"}, {n: "–í–æ–ª—à–µ–±–Ω—ã–π –ü–æ—è—Å", i: "üéóÔ∏è"},
            {n: "–©–∏—Ç –ù–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏", i: "üõ°Ô∏è"}, {n: "–ú–æ—Å—Ç –†–∞–¥–æ—Å—Ç–∏", i: "üåà"}, {n: "–õ–æ–≤–µ—Ü –ú—ã—Å–ª–µ–π", i: "üï∏Ô∏è"},
            {n: "–í–æ–ª—à–µ–±–Ω–∞—è –ö–Ω–æ–ø–∫–∞", i: "üîò"}, {n: "–†—é–∫–∑–∞–∫ –ü–æ–¥–¥–µ—Ä–∂–∫–∏", i: "üéí"}, {n: "–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –°–∞–¥", i: "üå≥"},
            {n: "–°–≤–µ—Ç–æ—Ñ–æ—Ä –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è", i: "üö•"}, {n: "–î–æ–º–∏–∫ –°–ø–æ–∫–æ–π—Å—Ç–≤–∏—è", i: "üè†"}, {n: "–í–æ–ª—à–µ–±–Ω—ã–π –®–∞–≥", i: "üë£"},
            {n: "–í–æ–ª—à–µ–±–Ω—ã–µ –û—á–∫–∏", i: "üëì"}, {n: "–û–¥–µ—è–ª–æ –ó–∞–±–æ—Ç—ã", i: "üõå"}, {n: "–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –§–æ–Ω–∞—Ä–∏–∫", i: "üî¶"},
            {n: "–í–æ–ª—à–µ–±–Ω–æ–µ –°–µ—Ä–¥—Ü–µ", i: "üíñ"}, {n: "–õ–µ—Å –¢–∏—à–∏–Ω—ã", i: "üå≤"}, {n: "–í–æ–ª–Ω–∞ –†–∞–¥–æ—Å—Ç–∏", i: "üåä"},
            {n: "–°–≤–µ—Ç–ª—è—á–æ–∫ –ó–∞–±–æ—Ç—ã", i: "ü™î"}, {n: "–í–æ–ª—à–µ–±–Ω–æ–µ –£—Ö–æ", i: "üëÇ"}, {n: "–†–µ–∫–∞ –ü—Ä–∏–Ω—è—Ç–∏—è", i: "üö£"},
            {n: "–õ–∞–º–ø–æ—á–∫–∞ –û—Å–æ–∑–Ω–∞–Ω–∏—è", i: "üí°"}, {n: "–ö—Ä—ã–ª—å—è –ú–µ—á—Ç—ã", i: "ü™Ω"}, {n: "–ö—Ä–∏—Å—Ç–∞–ª–ª –ß–µ—Å—Ç–Ω–æ—Å—Ç–∏", i: "üíé"},
            {n: "–ó–æ–ª–æ—Ç–∞—è –ù–∏—Ç—å", i: "üßµ"}, {n: "–ó–≤–µ–∑–¥–∞ –ù–∞–¥–µ–∂–¥—ã", i: "‚≠ê"}, {n: "–í–æ–ª—à–µ–±–Ω—ã–π –ö–ª—é—á", i: "üîë"}
        ];

        const grid = document.getElementById('main-grid');
        items.forEach((item, index) => {
            const card = document.createElement('div');
            card.className = 'day-card';
            card.innerHTML = `<div class="day-num">–î–µ–Ω—å ${index + 1}</div><div class="day-icon">${item.i}</div><div class="artifact-label">${item.n}</div>`;
            card.onclick = () => openDay(index + 1, item.n);
            grid.appendChild(card);
        });

        async function openDay(num, name) {
            document.getElementById('artifact-name-label').innerText = name;
            
            // –ü–æ–¥–∫–ª—é—á–∞–µ–º –∞—É–¥–∏–æ
            document.getElementById('s-a').src = `audio/day${num}_story.mp3`;
            document.getElementById('song-audio').src = `audio/day${num}_song.mp3`;
            document.getElementById('c-a').src = `audio/day${num}_child.mp3`;
            document.getElementById('a-a').src = `audio/day${num}_adult.mp3`;

            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–∫—Å—Ç—ã –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ —Ñ–∞–π–ª–∞ JSON
            try {
                const res = await fetch(`texts/day${num}.json`);
                const data = await res.json();
                document.getElementById('s-t').innerText = data.story;
                document.getElementById('c-t').innerText = data.child;
                document.getElementById('a-t').innerText = data.adult;
            } catch (e) {
                document.querySelectorAll('.text-content').forEach(el => el.innerText = "–¢–µ–∫—Å—Ç —Å–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω...");
            }

            document.getElementById('content-page').style.display = 'block';
        }

        function closeDay() {
            document.querySelectorAll('audio').forEach(a => { a.pause(); a.src = ""; });
            document.getElementById('content-page').style.display = 'none';
        }

        function setMode(btn, showId, hideId) {
            btn.parentNode.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById(showId).style.display = 'block';
            document.getElementById(hideId).style.display = 'none';
        }

        const tg = window.Telegram.WebApp;
        tg.ready(); tg.expand();
    </script>
</body>
</html>
