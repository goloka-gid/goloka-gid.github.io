<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ú–∏—Ä –≠–ª–ª–∏</title>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&family=Lora:ital,wght@0,400;1,500&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        :root {
            --bg-gradient: linear-gradient(135deg, #FFF5E1 0%, #E6E6FA 50%, #E0F7FA 100%);
            --accent: #8A2BE2;
            --text-color: #483D8B;
            --gold: #FFD700;
            --glass: rgba(255, 255, 255, 0.65);
            --glass-border: rgba(255, 255, 255, 0.9);
        }

        body {
            font-family: 'Comfortaa', cursive;
            background: var(--bg-gradient);
            background-attachment: fixed;
            color: var(--text-color);
            margin: 0; padding: 10px;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-3px); } 100% { transform: translateY(0px); } }

        /* –û–±—â–∏–µ –∫–ª–∞—Å—Å—ã */
        .view-section { display: none; animation: fadeIn 0.4s ease-out; }
        .active-view { display: block; }

        h1, h2 { text-align: center; color: var(--accent); text-shadow: 1px 1px 0px rgba(255,255,255,0.8); }
        h1 { font-size: 24px; margin: 15px 0 20px 0; }

        /* --- –≠–ö–†–ê–ù 1: –°–ï–¢–ö–ê –î–ù–ï–ô --- */
        .grid { 
            display: grid; grid-template-columns: repeat(3, 1fr); 
            gap: 8px; max-width: 500px; margin: 0 auto; padding-bottom: 50px; 
        }
        
        .day-card {
            background: var(--glass);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            border-radius: 16px; padding: 10px 2px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(138, 43, 226, 0.1);
            border: 1px solid var(--glass-border); 
            transition: transform 0.2s; cursor: pointer;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .day-card:active { transform: scale(0.95); }
        .day-card.completed { background: rgba(255, 248, 220, 0.85); border-color: var(--gold); }
        .day-card.completed::after {
            content: '‚≠ê'; position: absolute; top: -6px; right: -6px;
            font-size: 14px; animation: float 3s infinite ease-in-out;
        }
        .day-icon { font-size: 28px; margin: 4px 0; filter: drop-shadow(0 4px 2px rgba(0,0,0,0.1)); }
        .day-name { font-size: 10px; font-weight: bold; line-height: 1.1; word-wrap: break-word; padding: 0 2px; }

        /* --- –≠–ö–†–ê–ù 2: –ú–ï–ù–Æ –î–ù–Ø --- */
        .menu-container {
            display: flex; flex-direction: column; gap: 15px;
            max-width: 400px; margin: 20vh auto 0; padding: 20px;
        }
        
        .menu-btn {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid white;
            border-radius: 20px;
            padding: 20px;
            display: flex; align-items: center; gap: 15px;
            font-family: 'Comfortaa', cursive; font-size: 16px; color: var(--text-color);
            box-shadow: 0 8px 20px rgba(138, 43, 226, 0.1);
            cursor: pointer; transition: 0.2s;
        }
        .menu-btn:active { transform: scale(0.97); background: #f0ebff; }
        .menu-icon { font-size: 24px; }
        
        /* –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ –¥–ª—è –º–µ–Ω—é */
        .simple-back {
            background: none; border: none; color: var(--accent);
            font-weight: bold; font-family: 'Comfortaa'; cursor: pointer;
            margin-bottom: 10px; display: flex; align-items: center; gap: 5px;
        }

        /* --- –≠–ö–†–ê–ù 3: –ß–¢–ï–ù–ò–ï (–ö–û–ù–¢–ï–ù–¢) --- */
        .header-fixed {
            position: fixed; top: 0; left: 0; width: 100%; height: 70px;
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 15px; z-index: 1100;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255,255,255,0.5);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –≤ —à–∞–ø–∫–µ */
        .nav-btn {
            background: transparent; border: 1px solid var(--accent);
            border-radius: 12px; padding: 6px 12px;
            color: var(--accent); font-size: 12px; font-weight: bold;
            cursor: pointer; display: flex; align-items: center; gap: 5px;
            font-family: 'Comfortaa'; transition: 0.2s;
        }
        .nav-btn:active { background: var(--accent); color: white; }

        .scroll-wrapper {
            padding-top: 80px; height: 100vh; overflow-y: auto; scroll-behavior: smooth;
            padding-bottom: 100px; /* –º–µ—Å—Ç–æ –¥–ª—è —Å–∫—Ä–æ–ª–ª–∞ */
        }
        
        .magic-text {
            font-family: 'Lora', serif; font-size: 18px; line-height: 1.7;
            color: #3a2b5d; white-space: pre-wrap;
        }

        .section-box {
            background: rgba(255,255,255,0.5); border-radius: 24px;
            padding: 20px 15px; margin-bottom: 20px; border: 2px solid white;
            box-shadow: 0 10px 30px rgba(138, 43, 226, 0.05);
        }

        /* –ú–µ–¥–∏–∞ */
        .book-media { width: 100%; border-radius: 16px; margin: 15px 0; border: 4px solid white; box-shadow: 0 8px 15px rgba(0,0,0,0.1); }
        audio { width: 100%; border-radius: 30px; margin-top: 10px; }
        .video-container {
            position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;
            border-radius: 16px; border: 4px solid white; background: black; margin-bottom: 20px;
        }
        .video-container video { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        /* –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ —Å–∫—Ä–æ–ª–ª–∞ */
        .fab-scroll {
            position: fixed; bottom: 30px; right: 20px;
            background: var(--accent); color: white;
            width: 50px; height: 50px; border-radius: 50%;
            border: none; box-shadow: 0 4px 15px rgba(138,43,226,0.4);
            font-size: 24px; cursor: pointer; z-index: 1200;
            display: flex; align-items: center; justify-content: center;
        }
        .fab-scroll.active { background: #ff6b6b; }
    </style>
</head>
<body>

    <div id="view-grid" class="view-section active-view">
        <h1>‚ú® –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≠–ª–ª–∏</h1>
        <div class="grid" id="main-grid"></div>
    </div>

    <div id="view-menu" class="view-section">
        <button class="simple-back" onclick="goHome()">‚¨Ö –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞—Ä—Ç–µ</button>
        <h2 id="menu-title"></h2>
        <div class="menu-container">
            <div class="menu-btn" onclick="openContent('story')">
                <span class="menu-icon">üìñ</span>
                <div>
                    <div style="font-weight:bold">–°–∫–∞–∑–æ—á–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è</div>
                    <div style="font-size:11px; opacity:0.7">–ß–∏—Ç–∞—Ç—å –∏ —Å–ª—É—à–∞—Ç—å</div>
                </div>
            </div>
            
            <div class="menu-btn" onclick="openContent('child')">
                <span class="menu-icon">üë∂</span>
                <div>
                    <div style="font-weight:bold">–î–µ—Ç—Å–∫–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞</div>
                    <div style="font-size:11px; opacity:0.7">–ú–µ–¥–∏—Ç–∞—Ü–∏—è –¥–ª—è –º–∞–ª—ã—à–µ–π</div>
                </div>
            </div>

            <div class="menu-btn" onclick="openContent('adult')">
                <span class="menu-icon">üßò‚Äç‚ôÄÔ∏è</span>
                <div>
                    <div style="font-weight:bold">–í–∑—Ä–æ—Å–ª–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞</div>
                    <div style="font-size:11px; opacity:0.7">–û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å –¥–ª—è —Ç–µ–±—è</div>
                </div>
            </div>
        </div>
    </div>

    <div id="view-content" class="view-section">
        <div class="header-fixed">
            <button class="nav-btn" onclick="goHome()">üè† –î–Ω–∏</button>
            <span id="header-title" style="font-size:12px; font-weight:bold; max-width: 120px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"></span>
            <button class="nav-btn" onclick="goBackToMenu()">üîô –ú–µ–Ω—é –¥–Ω—è</button>
        </div>

        <div class="scroll-wrapper" id="scroll-box">
            <div style="padding: 15px;">
                <div id="video-area" style="display:none;">
                    <div class="video-container">
                        <video id="video-player" controls playsinline></video>
                    </div>
                </div>

                <div class="section-box">
                    <div id="text-display" class="magic-text"></div>
                </div>

                <div class="section-box">
                    <h3 style="color: var(--accent); margin-top:0; font-size: 16px;">üéß –°–ª—É—à–∞—Ç—å</h3>
                    <audio id="audio-player" controls></audio>
                </div>
            </div>
        </div>
        
        <button class="fab-scroll" id="scroll-btn" onclick="toggleAutoScroll()">‚ú®</button>
    </div>

    <script>
        // –î–ê–ù–ù–´–ï
        const items = [
            {n: "–í–æ–ª—à–µ–±–Ω–∞—è –ö–∏—Å—Ç—å", i: "üñåÔ∏è"}, {n: "–ó–µ—Ä–∫–∞–ª–æ –ú–µ—á—Ç—ã", i: "ü™û"}, {n: "–ö–æ–º–ø–∞—Å –ù–∞–º–µ—Ä–µ–Ω–∏–π", i: "üß≠"},
            {n: "–°—É–Ω–¥—É–∫ –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–µ–π", i: "üì¶"}, {n: "–ê–º—É–ª–µ—Ç –°–∏–ª—ã", i: "üßø"}, {n: "–í–æ–ª—à–µ–±–Ω—ã–π –ü–æ—è—Å", i: "üéóÔ∏è"},
            {n: "–©–∏—Ç –ù–∞—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏", i: "üõ°Ô∏è"}, {n: "–ú–æ—Å—Ç –†–∞–¥–æ—Å—Ç–∏", i: "üåà"}, {n: "–õ–æ–≤–µ—Ü –ú—ã—Å–ª–µ–π", i: "üï∏Ô∏è"},
            {n: "–í–æ–ª—à–µ–±–Ω–∞—è –ö–Ω–æ–ø–∫–∞", i: "üîò"}, {n: "–†—é–∫–∑–∞–∫ –ü–æ–¥–¥–µ—Ä–∂–∫–∏", i: "üéí"}, {n: "–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –°–∞–¥", i: "üå≥"},
            {n: "–°–≤–µ—Ç–æ—Ñ–æ—Ä –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è", i: "üö•"}, {n: "–î–æ–º–∏–∫ –°–ø–æ–∫–æ–π—Å—Ç–≤–∏—è", i: "üè†"}, {n: "–í–æ–ª—à–µ–±–Ω—ã–π –®–∞–≥", i: "üë£"},
            {n: "–í–æ–ª—à–µ–±–Ω—ã–µ –û—á–∫–∏", i: "üëì"}, {n: "–û–¥–µ—è–ª–æ –ó–∞–±–æ—Ç—ã", i: "üõå"}, {n: "–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –§–æ–Ω–∞—Ä–∏–∫", i: "üî¶"},
            {n: "–í–æ–ª—à–µ–±–Ω–æ–µ –°–µ—Ä–¥—Ü–µ", i: "üíñ"}, {n: "–õ–µ—Å –¢–∏—à–∏–Ω—ã", i: "üå≤"}, {n: "–í–æ–ª–Ω–∞ –†–∞–¥–æ—Å—Ç–∏", i: "üåä"},
            {n: "–°–≤–µ—Ç–ª—è—á–æ–∫ –ó–∞–±–æ—Ç—ã", i: "ü™î"}, {n: "–í–æ–ª—à–µ–±–Ω–æ–µ –£—Ö–æ", i: "üëÇ"}, {n: "–†–µ–∫–∞ –ü—Ä–∏–Ω—è—Ç–∏—è", i: "üö£"},
            {n: "–õ–∞–º–ø–æ—á–∫–∞ –û—Å–æ–∑–Ω–∞–Ω–∏—è", i: "üí°"}, {n: "–ö—Ä—ã–ª—å—è –ú–µ—á—Ç—ã", i: "ü™Ω"}, {n: "–ö—Ä–∏—Å—Ç–∞–ª–ª –ß–µ—Å—Ç–Ω–æ—Å—Ç–∏", i: "üíé"},
            {n: "–ó–æ–ª–æ—Ç–∞—è –ù–∏—Ç—å", i: "üßµ"}, {n: "–ó–≤–µ–∑–¥–∞ –ù–∞–¥–µ–∂–¥—ã", i: "‚≠ê"}, {n: "–í–æ–ª—à–µ–±–Ω—ã–π –ö–ª—é—á", i: "üîë"}
        ];

        // –°–û–°–¢–û–Ø–ù–ò–ï
        let currentDayNum = 1;
        let currentDayName = "";
        let currentDayData = null; // –ó–¥–µ—Å—å —Ö—Ä–∞–Ω–∏–º –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π JSON
        let readDays = JSON.parse(localStorage.getItem('elli_progress')) || [];
        let isScrolling = false;
        let scrollInterval;

        // --- 1. –û–¢–†–ò–°–û–í–ö–ê –°–ï–¢–ö–ò ---
        function renderGrid() {
            const grid = document.getElementById('main-grid');
            grid.innerHTML = '';
            items.forEach((item, i) => {
                const dayNum = i + 1;
                const card = document.createElement('div');
                const isRead = readDays.includes(dayNum);
                card.className = `day-card ${isRead ? 'completed' : ''}`;
                card.innerHTML = `
                    <div style="font-size:9px; color: ${isRead ? '#d4af37' : '#aaa'}; font-weight:${isRead?'bold':'normal'};">–î–ï–ù–¨ ${dayNum}</div>
                    <div class="day-icon">${item.i}</div>
                    <div class="day-name">${item.n}</div>
                `;
                card.onclick = () => openDayMenu(dayNum, item.n);
                grid.appendChild(card);
            });
        }
        renderGrid();

        // --- 2. –ü–ï–†–ï–•–û–î –í –ú–ï–ù–Æ –î–ù–Ø ---
        async function openDayMenu(num, name) {
            currentDayNum = num;
            currentDayName = name;
            
            // –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
            currentDayData = null; 

            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —ç–∫—Ä–∞–Ω
            switchView('view-menu');
            document.getElementById('menu-title').innerText = `–î–µ–Ω—å ${num}: ${name}`;

            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å (—á—Ç–æ –¥–µ–Ω—å –æ—Ç–∫—Ä—ã—Ç)
            if (!readDays.includes(num)) {
                readDays.push(num);
                localStorage.setItem('elli_progress', JSON.stringify(readDays));
                renderGrid();
            }

            // –ó–∞–≥—Ä—É–∂–∞–µ–º JSON –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –¥–µ–Ω—å
            try {
                const res = await fetch(`texts/day${num}.json`);
                if (res.ok) {
                    currentDayData = await res.json();
                } else {
                    currentDayData = { story: "–ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫–∞ –Ω–µ –Ω–∞–ø–∏—Å–∞–Ω–∞...", child: "–°–∫–æ—Ä–æ...", adult: "–°–∫–æ—Ä–æ..." };
                }
            } catch (e) {
                console.error(e);
                currentDayData = { story: "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ :(", child: "", adult: "" };
            }
        }

        // --- 3. –û–¢–ö–†–´–¢–ò–ï –ö–û–ù–¢–ï–ù–¢–ê (–ò–°–¢–û–†–ò–Ø / –î–ï–¢–ò / –í–ó–†–û–°–õ–´–ï) ---
        function openContent(type) {
            if (!currentDayData) return;

            switchView('view-content');
            const container = document.getElementById('scroll-box');
            container.scrollTop = 0;
            
            const textDisplay = document.getElementById('text-display');
            const audioPlayer = document.getElementById('audio-player');
            const videoArea = document.getElementById('video-area');
            const videoPlayer = document.getElementById('video-player');
            const titleLabel = document.getElementById('header-title');

            // –°–±—Ä–æ—Å –º–µ–¥–∏–∞
            audioPlayer.pause();
            videoPlayer.pause();
            videoArea.style.display = 'none';
            stopScroll();

            // –õ–æ–≥–∏–∫–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
            if (type === 'story') {
                titleLabel.innerText = "üìñ –ò—Å—Ç–æ—Ä–∏—è";
                textDisplay.innerHTML = formatText(currentDayData.story, currentDayNum);
                audioPlayer.src = `audio/day${currentDayNum}_story.mp3`;
                
                // –í–∏–¥–µ–æ —Ç–æ–ª—å–∫–æ –≤ –∏—Å—Ç–æ—Ä–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ JSON)
                if (currentDayData.video) {
                    videoArea.style.display = 'block';
                    videoPlayer.src = `videos/day${currentDayNum}.mp4`;
                }

            } else if (type === 'child') {
                titleLabel.innerText = "üë∂ –ü—Ä–∞–∫—Ç–∏–∫–∞";
                textDisplay.innerHTML = formatText(currentDayData.child, currentDayNum);
                audioPlayer.src = `audio/day${currentDayNum}_child.mp3`;

            } else if (type === 'adult') {
                titleLabel.innerText = "üßò‚Äç‚ôÄÔ∏è –ü—Ä–∞–∫—Ç–∏–∫–∞";
                textDisplay.innerHTML = formatText(currentDayData.adult, currentDayNum);
                audioPlayer.src = `audio/day${currentDayNum}_adult.mp3`;
            }

            audioPlayer.load();
        }

        // --- –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ---
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–æ–≤
        function switchView(viewId) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active-view'));
            document.getElementById(viewId).classList.add('active-view');
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏ —Ç–µ–∫—Å—Ç–∞
        function formatText(text, dayNum) {
            if (!text) return "";
            let html = text.replace(/\n/g, '<br>'); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–µ—Ä–µ–Ω–æ—Å—ã
            
            // –ö–∞—Ä—Ç–∏–Ω–∫–∏
            html = html.replace(/\[IMAGE(\d*)\]/g, (match, p1) => {
                const suffix = p1 ? `_${p1}` : ''; 
                return `<img src="images/day${dayNum}${suffix}.jpg" class="book-media" onerror="this.style.display='none'">`;
            });
            // –ì–∏—Ñ–∫–∏
            html = html.replace(/\[GIF(\d*)\]/g, (match, p1) => {
                const suffix = p1 ? `_${p1}` : '';
                return `<img src="images/day${dayNum}${suffix}.gif" class="book-media" onerror="this.style.display='none'">`;
            });
            return html;
        }

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        function goBackToMenu() {
            stopScroll();
            document.getElementById('audio-player').pause();
            document.getElementById('video-player').pause();
            switchView('view-menu');
        }

        function goHome() {
            stopScroll();
            document.getElementById('audio-player').pause();
            document.getElementById('video-player').pause();
            switchView('view-grid');
        }

        // –ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª
        function toggleAutoScroll() {
            const container = document.getElementById('scroll-box');
            const btn = document.getElementById('scroll-btn');
            
            if (isScrolling) {
                clearInterval(scrollInterval);
                btn.classList.remove('active');
            } else {
                scrollInterval = setInterval(() => {
                    container.scrollTop += 1; 
                    if (container.scrollTop + container.clientHeight >= container.scrollHeight - 2) {
                        stopScroll();
                    }
                }, 35);
                btn.classList.add('active');
            }
            isScrolling = !isScrolling;
        }

        function stopScroll() {
            clearInterval(scrollInterval);
            isScrolling = false;
            document.getElementById('scroll-btn').classList.remove('active');
        }

        // Telegram Setup
        const tg = window.Telegram.WebApp;
        tg.ready(); tg.expand();
        tg.setHeaderColor('#fdfbf7'); 
        tg.setBackgroundColor('#fdfbf7');
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" —Å–∞–º–æ–≥–æ —Ç–µ–ª–µ–≥—Ä–∞–º–∞ (—Ñ–∏–∑–∏—á–µ—Å–∫–æ–π/—Å–∏—Å—Ç–µ–º–Ω–æ–π)
        tg.BackButton.onClick(() => {
            const gridActive = document.getElementById('view-grid').classList.contains('active-view');
            const menuActive = document.getElementById('view-menu').classList.contains('active-view');
            
            if (!gridActive) {
                if (menuActive) goHome();
                else goBackToMenu();
            }
        });
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç—å—é –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" —Ç–µ–ª–µ–≥—Ä–∞–º–∞
        setInterval(() => {
            if (document.getElementById('view-grid').classList.contains('active-view')) {
                tg.BackButton.hide();
            } else {
                tg.BackButton.show();
            }
        }, 200);

    </script>
</body>
</html>
